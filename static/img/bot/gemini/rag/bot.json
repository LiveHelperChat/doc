{"bot":{"nick":"Gemini","name":"GeminiRAG"},"groups":[{"group":{"name":"Default","is_collapsed":0,"pos":0},"triggers":[{"trigger":{"id":133,"name":"Default for unknown message","actions":"[{\"_id\":\"A62f0Zv8V\",\"type\":\"typing\",\"content\":{\"text\":\"\",\"untill_message\":true}},{\"_id\":\"qt7AAaR8_\",\"type\":\"restapi\",\"content\":{\"text\":\"\",\"rest_api\":\"9\",\"rest_api_method\":\"temp1744006434151\",\"rest_api_method_params\":[],\"rest_api_method_output\":{\"temp1744006520771\":\"140\",\"default_trigger\":\"143\"},\"attr_options\":{\"background_process_delegate\":true,\"as_system\":true,\"no_body\":true}},\"skip_resp\":true},{\"_id\":\"cvBbfqqat\",\"type\":\"restapi\",\"content\":{\"text\":\"\",\"rest_api\":8,\"rest_api_method\":\"temp1707815934109\",\"rest_api_method_params\":[],\"rest_api_method_output\":{\"temp1707816009806\":\"134\",\"temp1707819824689\":\"135\",\"temp1736423057534\":\"136\",\"default_trigger\":\"135\"},\"attr_options\":{\"as_system\":true,\"background_process_delegate\":true,\"custom_args_1\":\"\"}},\"skip_resp\":false}]","default":1,"default_unknown":1,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":134,"name":"Gemini Response","actions":"[{\"_id\":\"7Ea14rw2L\",\"type\":\"text\",\"content\":{\"text\":\"{content_1}\"},\"skip_resp\":false}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":135,"name":"Failure","actions":"[{\"_id\":\"bLcR-sUVb\",\"type\":\"text\",\"content\":{\"text\":\"There was a problem with your request. I'll transfer you to an agent.\\n\",\"attr_options\":{\"json_replace\":true}},\"skip_resp\":false},{\"_id\":\"Bav-kFxq5\",\"type\":\"command\",\"content\":{\"text\":\"\",\"command\":\"setchatattribute\",\"payload\":\"gbot_id\",\"payload_arg\":\"288\"},\"skip_resp\":true},{\"_id\":\"Hx2kOdb6D\",\"type\":\"text\",\"content\":{\"text\":\"Searching for default action.\",\"attr_options\":{\"as_system\":true}},\"skip_resp\":true},{\"_id\":\"8jmoM6adE\",\"type\":\"match_actions\",\"content\":{\"text\":\"default_action_failover\",\"check_visitor_first\":true,\"check_visitor_msg\":true,\"on_start_type\":\"5\"}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":136,"name":"ToolCall","actions":"[{\"_id\":\"5Ywuj8tLs\",\"type\":\"command\",\"content\":{\"text\":\"Tool call requestion\",\"attr_options\":{\"json_replace\":true,\"as_system\":true},\"command\":\"chatvariable\",\"payload\":\"{\\\"ai_action_id\\\":\\\"{content_1}\\\",\\\"ai_action_args\\\":{content_2}}\"},\"skip_resp\":false},{\"_id\":\"HPRQ_pxev\",\"type\":\"match_actions\",\"content\":{\"text\":\"{content_1}\",\"attr_options\":{\"as_json\":true,\"json_replace\":true,\"as_system\":true},\"alternative_callback\":\"139\",\"on_start_type\":\"2\"}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":137,"name":"ToolCall API","actions":"[{\"_id\":\"cvBbfqqat\",\"type\":\"restapi\",\"content\":{\"text\":\"\",\"rest_api\":8,\"rest_api_method\":\"temp1707815934109\",\"rest_api_method_params\":[],\"rest_api_method_output\":{\"temp1707816009806\":\"134\",\"temp1707819824689\":\"135\",\"temp1736423057534\":\"136\",\"default_trigger\":\"135\"},\"attr_options\":{\"as_system\":true,\"background_process_delegate\":true}}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":138,"name":"support_price","actions":"[{\"_id\":\"HPRQ_pxev\",\"type\":\"text\",\"content\":{\"text\":\"{\\n                    \\\"role\\\": \\\"model\\\",\\n                    \\\"parts\\\": [\\n                        {\\n                            \\\"functionCall\\\": {\\n                                \\\"name\\\": \\\"support_price\\\"\\n                            }\\n                        }\\n                    ]\\n                },\\n{\\n    \\\"role\\\": \\\"user\\\",\\n    \\\"parts\\\": [{\\n      \\\"functionResponse\\\": {\\n        \\\"name\\\": \\\"{args.chat.chat_variables_array.ai_action_id}\\\",\\n        \\\"response\\\": {\\n          \\\"name\\\": \\\"{args.chat.chat_variables_array.ai_action_id}\\\",\\n          \\\"content\\\": \\\"40 EUR\\\"\\n        }\\n      }\\n    }]\\n  }\\n\\n\",\"attr_options\":{\"as_json\":true,\"json_replace\":true,\"as_system\":true}}},{\"_id\":\"inQxADV1B\",\"type\":\"predefined\",\"content\":{\"text\":\"\",\"payload\":\"137\"}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[{"pattern":"support_price","pattern_exc":"","configuration":"{\"only_these\":true}","type":2,"on_start_type":2,"priority":0,"skip":0}],"payloads":[]},{"trigger":{"id":139,"name":"Function not found","actions":"[{\"_id\":\"1nX3uRE0m\",\"type\":\"text\",\"content\":{\"text\":\"Function not found\"}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":144,"name":"knowledge_base","actions":"[{\"_id\":\"qt7AAaR8_\",\"type\":\"restapi\",\"content\":{\"text\":\"\",\"rest_api\":\"9\",\"rest_api_method\":\"temp1744006434151\",\"rest_api_method_params\":[],\"rest_api_method_output\":{\"temp1744006520771\":\"140\",\"default_trigger\":\"145\"},\"attr_options\":{\"background_process_delegate\":true,\"as_system\":true,\"no_body\":true}},\"skip_resp\":false}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[{"pattern":"knowledge_base","pattern_exc":"","configuration":"{\"only_these\":true}","type":2,"on_start_type":2,"priority":0,"skip":0}],"payloads":[]}]},{"group":{"name":"RAG","is_collapsed":0,"pos":0},"triggers":[{"trigger":{"id":140,"name":"SearchChroma","actions":"[{\"_id\":\"CtEipKXrZ\",\"type\":\"restapi\",\"content\":{\"text\":\"ChromaExecuted\",\"rest_api\":\"10\",\"rest_api_method\":\"temp1744008297543\",\"rest_api_method_params\":[],\"rest_api_method_output\":{\"temp1744008570299\":\"143\",\"default_trigger\":\"145\"},\"attr_options\":{\"custom_args_1\":\"{content_1}\",\"no_body\":true}}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":141,"name":"GetContextRAG","actions":"[{\"_id\":\"vQz1TTFvX\",\"type\":\"text\",\"content\":{\"text\":\"{\\n\\\"role\\\": \\\"user\\\", \\n\\\"parts\\\":[{\\n           \\\"text\\\": \\\"Please use this information to answer my previous question or call a function if you see it more relevant. Here is some relevant information to answer previous question:  raw_{content_1}\\\"}]\\n}\\n\",\"attr_options\":{\"as_json\":true,\"json_replace_all\":true,\"as_system\":true}}},{\"_id\":\"cvBbfqqat\",\"type\":\"restapi\",\"content\":{\"text\":\"\",\"rest_api\":8,\"rest_api_method\":\"temp1707815934109\",\"rest_api_method_params\":[],\"rest_api_method_output\":{\"temp1707816009806\":\"134\",\"temp1707819824689\":\"135\",\"temp1736423057534\":\"136\",\"default_trigger\":\"135\"},\"attr_options\":{\"as_system\":true,\"background_process_delegate\":true,\"custom_args_1\":\"\",\"no_body\":true}},\"skip_resp\":false}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":143,"name":"PrepareAnswerGemini","actions":"[{\"_id\":\"HPRQ_pxev\",\"type\":\"text\",\"content\":{\"text\":\"{\\n                    \\\"role\\\": \\\"model\\\",\\n                    \\\"parts\\\": [\\n                        {\\n                            \\\"functionCall\\\": {\\n                                \\\"name\\\": \\\"knowledge_base\\\"\\n                            }\\n                        }\\n                    ]\\n                },\\n{\\n    \\\"role\\\": \\\"user\\\",\\n    \\\"parts\\\": [{\\n      \\\"functionResponse\\\": {\\n        \\\"name\\\": \\\"{args.chat.chat_variables_array.ai_action_id}\\\",\\n        \\\"response\\\": {\\n          \\\"name\\\": \\\"{args.chat.chat_variables_array.ai_action_id}\\\",\\n          \\\"content\\\": {content_1}\\n        }\\n      }\\n    }]\\n  }\\n\\n\",\"attr_options\":{\"as_json\":true,\"json_replace\":true,\"as_system\":true,\"json_replace_all\":true}}},{\"_id\":\"inQxADV1B\",\"type\":\"predefined\",\"content\":{\"text\":\"\",\"payload\":\"137\"}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]},{"trigger":{"id":145,"name":"NoAnswerGemini","actions":"[{\"_id\":\"HPRQ_pxev\",\"type\":\"text\",\"content\":{\"text\":\"{\\n                    \\\"role\\\": \\\"model\\\",\\n                    \\\"parts\\\": [\\n                        {\\n                            \\\"functionCall\\\": {\\n                                \\\"name\\\": \\\"knowledge_base\\\"\\n                            }\\n                        }\\n                    ]\\n                },\\n{\\n    \\\"role\\\": \\\"user\\\",\\n    \\\"parts\\\": [{\\n      \\\"functionResponse\\\": {\\n        \\\"name\\\": \\\"{args.chat.chat_variables_array.ai_action_id}\\\",\\n        \\\"response\\\": {\\n          \\\"name\\\": \\\"{args.chat.chat_variables_array.ai_action_id}\\\",\\n          \\\"content\\\": \\\"Relevant information could not be found!\\\"\\n        }\\n      }\\n    }]\\n  }\\n\\n\",\"attr_options\":{\"as_json\":true,\"json_replace\":true,\"as_system\":true,\"json_replace_all\":true}}},{\"_id\":\"inQxADV1B\",\"type\":\"predefined\",\"content\":{\"text\":\"\",\"payload\":\"137\"}}]","default":0,"default_unknown":0,"default_always":0,"default_unknown_btn":0,"as_argument":0,"in_progress":0,"pos":0},"events":[],"payloads":[]}]}]}